!function(a){a.fn.ModalSelector=function(l){let n=a.extend({url:null,data:null,nameProperty:"name",idProperty:"id",childrenProperty:"children",_:{id:Math.floor(1e4*Math.random()),modalParent:"body"},localization:{search:"Ara"},icons:{search:"fas fa-search",parent:"fas fa-level-up-alt fa-rotate-90",child:"fas fa-play"},onSelect:null},l);const t=a(this);let e=null;async function o(l){null!==n.url&&(n.data=await async function(){return(await fetch(n.url)).json()}()),a(`<div class="modal fade modal-selector" id="modal-${n._.id}" tabindex="-1" role="dialog" aria-hidden="true">\n                <div class="modal-dialog" role="document">\n                  <div class="modal-content">\n                    <div class="modal-body">\n                    <div class="search-area">\n                      <div class="input-group mb-3">\n                        <input id="modal-selector-search-${n._.id}" type="text" class="form-control" placeholder="${n.localization.search}">\n                        <div class="input-group-append">\n                          <span class="input-group-text" id="basic-addon2"><i class="${n.icons.search}"></i></span>\n                        </div>\n                      </div>\n                    </div>\n                    <ul class="list-group">\n                      ${function a(l,t){let e="";return l.forEach(l=>{let o=!0;l.hasOwnProperty(n.childrenProperty)&&(o=!1),e+=`<li class="list-group-item modal-selector-item ${o?"last-item":""}" data-data='${JSON.stringify(l)}'\n                            style="padding-left: ${t}em"><i class="${o?n.icons.child:n.icons.parent} mr-3"></i>\n                            ${l[n.nameProperty]}</li>`,o||(t++,e+='<ul class="list-group">',l[n.childrenProperty].forEach(l=>{e+=a([l],t)}),t--,e+="</ul>")}),e}(n.data,1)}\n                    </ul>\n                    </div>\n                  </div>\n                </div>\n              </div>`).appendTo(n._.modalParent),r().on("keyup",i),a(".modal-selector .list-group-item.last-item").on("click",d),e=a("#modal-"+n._.id),function(){if(null===e)return;e.modal("show")}()}function i(l){!function(l){l=l.toLowerCase();let n=a(".modal-selector-item");if(""===l)return void n.show();for(let t of n){let n=(t=a(t)).text().trim().toLowerCase();n.includes(l)?t.show():t.hide()}}(r().val())}function r(){return a("#modal-selector-search-"+n._.id)}function d(l){null!==n.onSelect&&n.onSelect(l,a(this).data("data"),e)}!async function(){if(null===n.url&&null===n.data)throw Exception("Url veya data property'si girilmiş olmalıdır.");t.on("click",o)}()}}(jQuery);
