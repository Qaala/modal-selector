!function(l){l.fn.ModalSelector=function(a){let n=l.extend({url:null,data:null,nameProperty:"name",idProperty:"id",childrenProperty:"children",_:{id:Math.floor(1e4*Math.random()),modalParent:"body"},localization:{search:"Ara"},icons:{search:"fas fa-search",parent:"fas fa-level-up-alt fa-rotate-90",child:"fas fa-play"},onSelect:null},a);const t=l(this);let e=null;async function o(a){null!==n.url&&(n.data=await async function(){return(await fetch(n.url)).json()}()),l(`<div class="modal fade modal-selector" id="modal-${n._.id}" tabindex="-1" role="dialog" aria-hidden="true">\n                <div class="modal-dialog" role="document">\n                  <div class="modal-content">\n                    <div class="modal-body">\n                    <div class="search-area">\n                      <div class="input-group mb-3">\n                        <input id="modal-selector-search-${n._.id}" type="text" class="form-control" placeholder="${n.localization.search}">\n                        <div class="input-group-append">\n                          <span class="input-group-text" id="basic-addon2"><i class="${n.icons.search}"></i></span>\n                        </div>\n                      </div>\n                    </div>\n                    <ul class="list-group">\n                      ${function l(a,t){let e="";return a.forEach(a=>{let o=!0;a.hasOwnProperty(n.childrenProperty)&&0!==a[n.childrenProperty].length&&(o=!1),e+=`<li class="list-group-item modal-selector-item ${o?"last-item":""}" data-data='${JSON.stringify(a)}'\n                            style="padding-left: ${t}em"><i class="${o?n.icons.child:n.icons.parent} mr-3"></i>\n                            ${a[n.nameProperty]}</li>`,o||(t++,e+='<ul class="list-group">',a[n.childrenProperty].forEach(a=>{e+=l([a],t)}),t--,e+="</ul>")}),e}(n.data,1)}\n                    </ul>\n                    </div>\n                  </div>\n                </div>\n              </div>`).appendTo(n._.modalParent),r().on("keyup",i),l(".modal-selector .list-group-item.last-item").on("click",d),e=l("#modal-"+n._.id),function(){if(null===e)return;e.modal("show")}()}function i(a){!function(a){a=a.toLowerCase();let n=l(".modal-selector-item");if(""===a)return void n.show();for(let t of n){let n=(t=l(t)).text().trim().toLowerCase();n.includes(a)?t.show():t.hide()}}(r().val())}function r(){return l("#modal-selector-search-"+n._.id)}function d(a){null!==n.onSelect&&n.onSelect(a,l(this).data("data"),e)}!async function(){if(null===n.url&&null===n.data)throw Exception("Url veya data property'si girilmiş olmalıdır.");t.on("click",o)}()}}(jQuery);
